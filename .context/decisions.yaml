decisoes_tecnicas:
  windows_compatibility:
    - decisao: "Criar scripts de compatibilidade para Windows"
      motivo: "Garantir que o sistema funcione corretamente em ambiente Windows do cliente"
      status: "parcialmente implementado"
      detalhes: >
        Foram criados múltiplos scripts (setup.ps1, setup.bat, fix-prisma.bat, fix-windows-v2.bat) para tentar
        resolver o problema de compatibilidade do Prisma com Windows, especialmente o problema de resolução
        de módulos em monorepos com Yarn Workspaces. O problema principal é que o Prisma tenta encontrar seu
        módulo em um caminho incorreto com 'node_modules' duplicado.
    
    - decisao: "Abordagem alternativa para instalação no Windows"
      motivo: "Contornar problemas de resolução de módulos do Prisma no Windows"
      status: "em andamento"
      detalhes: >
        A abordagem alternativa envolve instalar o Prisma CLI globalmente e usar uma instalação local
        direta no pacote de backend, evitando o sistema de monorepo do Yarn para o Prisma. Esta 
        solução está em desenvolvimento, mas ainda não foi completamente bem-sucedida devido a
        dificuldades com a execução de scripts batch no Windows.
    
    - decisao: "Documentação detalhada para instalação manual"
      motivo: "Fornecer instruções claras para contornar problemas no Windows"
      status: "implementado"
      detalhes: >
        Foi criado um arquivo README-WINDOWS.md com instruções detalhadas para instalação manual
        e solução de problemas comuns no ambiente Windows. Este guia inclui dicas para resolver
        problemas específicos do Prisma.

  backend_recente:
    - decisao: "Servir imagens estaticamente no backend"
      motivo: "Garantir acesso a logos e outros recursos estáticos nos PDFs gerados"
      status: "implementado"

    - decisao: "Uso de fallback para logos via URL"
      motivo: "Assegurar que os PDFs sempre tenham a logo mesmo se o arquivo local não for encontrado"
      status: "implementado"
      
    - decisao: "Otimização de UI/UX com remoção de títulos redundantes"
      motivo: "Melhorar a experiência do usuário evitando informações repetidas nas páginas"
      status: "implementado"
      
    - decisao: "Alteração do nome para Lino's Panificadora"
      motivo: "Refletir com mais precisão o modelo de negócio e oferecer uma identidade mais profissional"
      status: "implementado"
      
    - decisao: "Abordagem unificada para filtros de data"
      motivo: "Resolver de forma consistente problemas de timezone em filtros por data tanto em pedidos quanto em relatórios"
      status: "implementado"
      
    - decisao: "Uso de OR condicional para datas"
      motivo: "Garantir que pedidos feitos no último dia do intervalo sejam sempre incluídos"
      status: "implementado"
      
    - decisao: "Exclusão de pedidos cancelados dos relatórios"
      motivo: "Fornecer métricas de vendas mais precisas e representativas"
      status: "implementado"

  frontend_recente:
    - decisao: "Acesso consistente a propriedades em hooks"
      motivo: "Resolver problemas de exibição de clientes no dropdown de relatórios"
      status: "implementado"
      
    - decisao: "Limite aumentado para listagem de clientes"
      motivo: "Garantir que todos os clientes estejam disponíveis para seleção em relatórios"
      status: "implementado"
  
  arquitetura:
    - decisao: "Uso do NestJS para backend"
      motivo: "Framework maduro com suporte a TypeScript e boa integração com Prisma"
      status: "implementado"
    
    - decisao: "SQLite como banco de dados"
      motivo: "Simplicidade para ambiente local e offline"
      status: "implementado"
    
    - decisao: "Prisma como ORM"
      motivo: "Type safety e boa integração com TypeScript"
      status: "implementado"
      
    - decisao: "Next.js 13 para frontend"
      motivo: "Performance, SSR e melhor SEO"
      status: "implementado"
      
    - decisao: "Material-UI como biblioteca UI"
      motivo: "Componentes maduros e customizáveis"
      status: "implementado"
      
    - decisao: "React Query para estado"
      motivo: "Cache, invalidação e sincronização automática"
      status: "implementado"
      
    - decisao: "Zod para validação"
      motivo: "Type safety e integração com React Hook Form"
      status: "implementado"

  backend:
    - decisao: "Validação de preços no servidor"
      motivo: "Garantir que sempre seja usado o preço atual do produto"
      status: "implementado"
    
    - decisao: "Uso do PuppeteerJS para PDFs"
      motivo: "Flexibilidade na geração de documentos"
      status: "implementado"
    
    - decisao: "Status de pedido como enum"
      motivo: "Maior type safety e controle de estados"
      status: "implementado"
      
    - decisao: "ESLint e Prettier"
      motivo: "Qualidade e consistência de código"
      status: "implementado"
      
    - decisao: "Validação de produtos duplicados"
      motivo: "Garantir integridade dos dados"
      status: "implementado"
      
    - decisao: "Tratamento de campos textuais"
      motivo: "Garantir consistência nos dados"
      status: "implementado"

  frontend:
    - decisao: "Uso do Zod para validação"
      motivo: "Type safety e integração com React Hook Form"
      status: "implementado"
      
    - decisao: "Next.js 13 para frontend"
      motivo: "Performance, SSR e melhor SEO"
      status: "implementado"
      
    - decisao: "Material-UI como biblioteca UI"
      motivo: "Componentes maduros e customizáveis"
      status: "implementado"
      
    - decisao: "React Query para estado"
      motivo: "Cache, invalidação e sincronização automática"
      status: "implementado"
      
    - decisao: "React Query para estado"
      motivo: "Cache, invalidação e sincronização automática"
      status: "implementado"
      
    - decisao: "Zod para validação"
      motivo: "Type safety e integração com React Hook Form"
      status: "implementado"

  testes:
    - decisao: "Testes de integração com SuperTest"
      motivo: "Cobertura completa de endpoints e regras de negócio"
      status: "implementado"
    
    - decisao: "Banco de teste separado"
      motivo: "Isolamento de dados de teste"
      status: "implementado"
      
    - decisao: "Jest para testes unitários"
      motivo: "Ecossistema maduro e boa integração"
      status: "implementado"
      
    - decisao: "Testes E2E"
      motivo: "Garantir funcionamento completo do sistema"
      status: "pendente"

decisoes_pendentes:
  proxima_fase:
    - "Implementar autenticação e autorização com diferentes níveis de acesso"
    - "Definição de estratégia para backup automático e repblicação"
    - "Implementar dashboard visual para indicadores de vendas"
    - "Integração com APIs externas para validação de CNPJ"
    - "Sistema de notificações em tempo real para status de pedidos"
    - "Migração para banco de dados mais robusto (MySQL/PostgreSQL)"
    
  otimizacoes:
    - "Estratégia de caching distribuído para melhorar performance"
    - "Implementação de filas para operações assíncronas"
    - "Versão offline com sincronização posterior"
    - "Implementação de dark mode com seletores de tema"
    - "Melhoria na responsividade para dispositivos móveis"
    - "Otimização de queries para grandes volumes de dados"

pontos_atencao:
  seguranca_dados:
    - "Implementar autenticação e autorização robusta para acesso ao sistema"
    - "Validar CNPJ via API externa para garantir informações corretas"
    - "Implementar proteção contra ataques de injeção SQL"
    - "Adicionar rate limiting para APIs públicas"
    - "Implementar proteção CSRF para formulários"
    - "Sanitizar inputs para evitar XSS e outros ataques"
    
  escalabilidade:
    - "Monitorar performance do sistema com aumento de volume de dados"
    - "Otimizar queries especialmente em relatórios e filtros com grandes intervalos"
    - "Implementar caching estratégico para recursos frequentemente acessados"
    - "Avaliar soluções de banco de dados mais robustas para grande escala"
    - "Implementar técnicas de paginação mais eficientes para conjuntos maiores"
    
  experiencia_usuario:
    - "Melhorar responsividade em dispositivos móveis"
    - "Implementar preview integrado de PDF"
    - "Aprimorar feedback visual durante interações"
    - "Adicionar filtros mais avançados para relatórios"
    - "Oferecer dashboards visuais para análise de vendas"
    - "Implementar notificações em tempo real sobre mudanças de status"
    
  qualidade_codigo:
    - "Manter cobertura de testes acima de 85%"
    - "Implementar testes automatizados para novas funcionalidades"
    - "Documentar APIs e validações de forma detalhada"
    - "Realizar revisão periódica de dependências"
    - "Seguir padrões consistentes de código"
    - "Implementar CI/CD para validação automática"